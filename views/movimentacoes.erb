<%# views/movimentacoes.erb %>
<div class="card shadow-sm">
  <div class="card-header">
    <h2 class="mb-0">Histórico de Movimentações</h2>
  </div>
  <div class="card-body">
    <% if @movimentacoes.empty? %>
      <p class="text-center text-muted mt-3">Nenhuma movimentação registrada no estoque.</p>
    <% else %>
      <div class="table-responsive">
        <table class="table table-hover table-striped">
          <thead>
          <tr>
            <th>Data</th>
            <th>Tipo</th>
            <th>Produto</th>
            <th>Quantidade</th>
            <th>Observação</th>
          </tr>
          </thead>
          <tbody>
          <% @movimentacoes.each do |mov| %>
            <%
              # MESTRE: Lógica para definir a cor da linha
              row_class = case mov['tipo_movimentacao'].to_s.downcase
                          when 'entrada', 'criacao'
                            'mov-adicionado'
                          when 'baixa', 'exclusao'
                            'mov-removido'
                          when 'atualizacao', 'ajuste'
                            'mov-editado'
                          else
                            ''
                          end
            %>
            <tr class="<%= row_class %>">
              <td><%= h mov['data_formatada'] %></td>
              <td><%= h mov['tipo_movimentacao'].capitalize %></td>
              <td><%= h mov['produto_nome'] %></td>
              <td class="text-center"><%= mov['quantidade'] %></td>
              <td><%= h mov['observacao'] %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
      </div>
    <% end %>
  </div>
</div>